/// <reference path="../test-typings.d.ts"/>
var fs = require('fs');
var mkdirp = require('mkdirp');
// relative to 'mendixmodelsdk/':
var outputPathPrefix = '.test-output/';
var testDataPathPrefix = './test/data/';
/**
 * Writes the given JSON under the given file name into the integration-tests/node/.test-output directory.
 */
function writeJson(fileName, json) {
    mkdirp(outputPathPrefix, /* trigger default: */ null, function (err) {
        if (err) {
            console.warn("could not create path '" + outputPathPrefix + " for test output");
        }
        else {
            fs.writeFile(outputPathPrefix + fileName, JSON.stringify(json, null, 4), { encoding: 'utf-8' }, function (err) {
                if (err) {
                    console.warn("could not write JSON to '" + outputPathPrefix + fileName + "' due to: " + err);
                }
                else {
                    console.log("wrote JSON to " + outputPathPrefix + fileName);
                }
            });
        }
    });
}
exports.writeJson = writeJson;
/**
 * Reads the given file file name under the integration-tests/node/test/data directory
 * and parses and returns it as JSON.
 */
function readJson(fileName) {
    return JSON.parse(fs.readFileSync(testDataPathPrefix + fileName, 'utf8'));
}
exports.readJson = readJson;
